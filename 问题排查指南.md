# 工业工作流管理系统 - 问题排查指南

## 🔍 快速定位问题

### **检查清单**

当遇到问题时，按顺序检查：

#### ✅ **1. MongoDB 是否运行？**

```powershell
Get-Service -Name MongoDB
```

**应该看到**：`Status: Running`

**如果没运行**：
```powershell
Start-Service -Name MongoDB
```

---

#### ✅ **2. 后端服务是否运行？**

```powershell
netstat -ano | findstr :3001
```

**应该看到**：类似 `TCP  0.0.0.0:3001  ...  LISTENING`

**测试后端**：
- 浏览器访问：http://localhost:3001
- 应该看到 JSON 响应

**如果没运行**：
```powershell
cd E:\workflow-web-main\workflow-web-main\backend
npm start
```

---

#### ✅ **3. 前端服务是否运行？**

```powershell
netstat -ano | findstr :3000
```

**应该看到**：类似 `TCP  0.0.0.0:3000  ...  LISTENING`

**测试前端**：
- 浏览器访问：http://localhost:3000
- 应该看到登录页面

**如果没运行**：
```powershell
cd E:\workflow-web-main\workflow-web-main\workflow-web
npm start
```

---

## 🐛 常见问题及解决方案

### **问题 1：登录时提示"无法连接到服务器"**

**原因**：后端没有运行或端口不对

**检查**：
1. 后端窗口是否还在运行？
2. 运行 `netstat -ano | findstr :3001` 检查端口
3. 浏览器访问 http://localhost:3001 测试

**解决**：
```powershell
cd E:\workflow-web-main\workflow-web-main\backend
npm start
```

---

### **问题 2：MongoDB 连接失败**

**错误信息**：`MongooseServerSelectionError: connect ECONNREFUSED`

**检查**：
```powershell
Get-Service -Name MongoDB
```

**解决**：
```powershell
# 启动 MongoDB
Start-Service -Name MongoDB

# 或以管理员身份运行
net start MongoDB
```

---

### **问题 3：npm 命令无法运行**

**错误信息**：`程序"npm"无法运行: 没有应用程序与此操作的指定文件有关联`

**解决**：使用 `cmd /c npm` 代替

```powershell
# 原命令
npm start

# 改用这个
cmd /c npm start
```

---

### **问题 4：端口被占用**

**错误信息**：`Error: listen EADDRINUSE: address already in use :::3000`

**解决**：

1. **找到占用端口的进程**：
```powershell
netstat -ano | findstr :3000
# 输出：TCP  0.0.0.0:3000  ...  LISTENING  12345
# 12345 是进程 PID
```

2. **关闭进程**：
```powershell
taskkill /PID 12345 /F
```

3. **或者关闭所有 Node.js 进程**：
```powershell
taskkill /IM node.exe /F
```

---

### **问题 5：前端页面空白**

**可能原因**：
1. 前端服务没启动
2. 浏览器缓存问题
3. JavaScript 错误

**解决**：
1. 按 `F12` 打开浏览器开发者工具
2. 查看 Console 标签的错误信息
3. 尝试硬刷新：`Ctrl + Shift + R`
4. 重启前端服务

---

### **问题 6：修改代码后没有生效**

**前端**：
- 前端有热更新，保存后会自动刷新
- 如果没刷新，手动刷新浏览器（`Ctrl + R`）

**后端**：
- 后端需要手动重启
- 在后端窗口按 `Ctrl + C` 停止
- 再次运行 `npm start`

---

## 🔧 排查工具命令

### **查看所有 Node.js 进程**
```powershell
Get-Process -Name node
```

### **查看端口占用情况**
```powershell
netstat -ano | findstr :3000
netstat -ano | findstr :3001
netstat -ano | findstr :27017
```

### **查看服务状态**
```powershell
Get-Service -Name MongoDB
```

### **测试网络连接**
```powershell
Test-NetConnection -ComputerName localhost -Port 3000
Test-NetConnection -ComputerName localhost -Port 3001
```

### **查看后端日志**
直接看后端窗口的输出信息

### **查看前端日志**
1. 浏览器按 `F12` 打开开发者工具
2. 查看 Console 标签

---

## 📋 完整启动检查流程

遇到问题时，按这个流程检查：

```
1. MongoDB 运行？
   ↓ 是
2. 后端运行？（端口 3001）
   ↓ 是
3. 前端运行？（端口 3000）
   ↓ 是
4. 浏览器能访问 http://localhost:3000？
   ↓ 是
5. 能登录？
   ↓ 是
✅ 一切正常！
```

---

## 💡 预防问题的建议

1. **启动顺序**：先 MongoDB → 再后端 → 最后前端
2. **保持窗口打开**：不要关闭后端和前端的窗口
3. **查看错误信息**：窗口中的红色错误信息很重要
4. **定期检查**：偶尔运行 `netstat` 确认端口正常
5. **记录问题**：遇到问题记下错误信息，方便查找原因

---

## 🆘 实在解决不了？

1. **记录错误信息**：完整的错误提示
2. **截图**：错误画面截图
3. **说明操作步骤**：做了什么导致出错
4. **提供日志**：后端窗口的完整输出

---

**记住**：99% 的问题都是以下三种情况之一
- MongoDB 没运行
- 后端没运行
- 端口被占用

按上面的检查清单一步步排查，很快就能解决！💪


